{"version":3,"sources":["js/Canvas.js","js/Bullet.js","js/Block.js","js/Player.js","js/utils.js","js/main.js"],"names":["CANVAS_WIDTH","CANVAS_HEIGHT","canvas","document","getElementById","width","height","ctx","getContext","Bullet","bullet","w","h","color","yVelocity","speed","active","draw","fillStyle","beginPath","arc","x","y","Math","PI","fill","inBounds","update","Block","block","points","floor","random","fillRect","font","text","value","toFixed","textMeasures","measureText","fillText","alive","Player","score","rand","collides","min","max","a","b","player","hero","bullets","shooting","shoot","setInterval","push","moveLeft","moveRight","blocks","n","blockWidth","i","keydown","left","right","space","drawBackground","drawScore","handleCollisions","forEach","filter","clearRect","handleControls","e","keyCode","type","addEventListeners","window","addEventListener","loop","requestAnimationFrame"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AKAA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA,IAAMkD,SAAS,sBAAf;;AAEA,IAAIC,OAAO;AACPtC,WAAO,KADA;AAEPF,OAAG,GAFI;AAGPC,OAAG,GAHI;AAIPS,OAAG,uBAAe,CAJX;AAKPC,OAAG,wBAAgB,GALZ;AAMPP,WAAO,EANA;AAOPqC,aAAS,EAPF;AAQPC,cAAU,KARH;AASPpC,UAAM,gBAAW;AACb,oBAAIC,SAAJ,GAAgB,KAAKL,KAArB;AACA,oBAAIoB,QAAJ,CAAa,KAAKZ,CAAlB,EAAqB,KAAKC,CAA1B,EAA6B,KAAKX,CAAlC,EAAqC,KAAKC,CAA1C;AACH,KAZM;AAaP0C,WAAO,iBAAW;AAAA;;AACd,YAAG,KAAKD,QAAR,EAAkB;AAClB,aAAKA,QAAL,GAAgBE,YAAY,YAAM;AAC9B,kBAAKH,OAAL,CAAaI,IAAb,CAAkB,qBAAW;AACzBzC,uBAAO,CADkB;AAEzBM,mBAAG,MAAKA,CAAL,GAAS,MAAKV,CAAL,GAAO,CAFM;AAGzBW,mBAAG,MAAKA;AAHiB,aAAX,CAAlB;AAKH,SANe,EAMb,GANa,CAAhB;AAOH,KAtBM;AAuBPmC,cAAU,oBAAW;AACjB,YAAG,KAAKpC,CAAL,GAAS,CAAZ,EAAe;AACX,iBAAKA,CAAL,IAAU,KAAKN,KAAf;AACH;AACJ,KA3BM;AA4BP2C,eAAW,qBAAW;AAClB,YAAG,KAAKrC,CAAL,GAAS,uBAAe,KAAKV,CAAhC,EAAmC;AAC/B,iBAAKU,CAAL,IAAU,KAAKN,KAAf;AACH;AACJ,KAhCM;AAiCPW,cAAU,oBAAW;AACjB,eAAO,KAAKL,CAAL,GAAS,CAAT,IAAc,KAAKA,CAAL,GAAS,uBAAe,KAAKV,CAAlD;AACH;AAnCM,CAAX;;AAsCA,IAAIgD,SAAS,EAAb;;AAEA,IAAIC,IAAI,CAAR;AACA,IAAIC,aAAa,uBAAeD,CAAhC;;AAEA,KAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAIF,CAApB,EAAuBE,GAAvB,EAA4B;AACxBH,WAAOH,IAAP,CAAY,oBAAU;AAClB3C,wBAAc,iBAAK,CAAL,EAAO,GAAP,CAAd,UAA8B,iBAAK,CAAL,EAAO,GAAP,CAA9B,UAA8C,iBAAK,CAAL,EAAO,GAAP,CAA9C,MADkB;AAElBF,WAAGkD,UAFe;AAGlBxC,WAAGwC,aAAaC,CAAb,GAAiB,CAHF;AAIlBxC,WAAG;AAJe,KAAV,CAAZ;AAMH;;AAGD,IAAIyC,UAAU;AACVC,UAAM,KADI;AAEVC,WAAO,KAFG;AAGVC,WAAO;AAHG,CAAd;;AAQA,SAASC,cAAT,GAA0B;AACtB,gBAAIjD,SAAJ,GAAgB,OAAhB;AACA,gBAAIe,QAAJ,CAAa,CAAb,EAAgB,CAAhB;AACH;;AAED,SAASmC,SAAT,GAAqB;AACjB,gBAAIlD,SAAJ,GAAgB,OAAhB;AACA,gBAAIgB,IAAJ,GAAW,YAAX;AACA,gBAAIM,QAAJ,aAAuB,CAAC,CAACU,OAAOP,KAAP,GAAe,OAAhB,EAAyBN,OAAzB,CAAiC,CAAjC,CAAxB,QAAgE,EAAhE,EAAoE,EAApE;AACH;;AAID,SAASgC,gBAAT,GAA4B;AACxBlB,SAAKC,OAAL,CAAakB,OAAb,CAAsB,kBAAU;AAC5BX,eAAOW,OAAP,CAAe,iBAAS;AACpB,gBAAG,qBAAS5D,MAAT,EAAiBmB,KAAjB,CAAH,EAA4B;AACxBnB,uBAAOM,MAAP,GAAgB,KAAhB;AACAa,sBAAMC,MAAN,IAAgB,KAAhB;AACAoB,uBAAOP,KAAP,IAAgB,KAAhB;AACH;AACJ,SAND;AAOH,KARD;AASH;;AAGD,SAAShB,MAAT,GAAkB;AACd,QAAGoC,QAAQC,IAAX,EAAiB;AACbb,aAAKM,QAAL;AACH;;AAED,QAAGM,QAAQE,KAAX,EAAkB;AACdd,aAAKO,SAAL;AACH;;AAED,QAAGK,QAAQG,KAAX,EAAkB;AACdf,aAAKG,KAAL;AACH;;AAEDH,SAAKC,OAAL,CAAakB,OAAb,CAAqB;AAAA,eAAU5D,OAAOiB,MAAP,EAAV;AAAA,KAArB;AACAwB,SAAKC,OAAL,GAAeD,KAAKC,OAAL,CAAamB,MAAb,CAAqB;AAAA,eAAU7D,OAAOM,MAAjB;AAAA,KAArB,CAAf;AACA2C,WAAOW,OAAP,CAAe;AAAA,eAASzC,MAAMF,MAAN,EAAT;AAAA,KAAf;AACAgC,aAASA,OAAOY,MAAP,CAAc;AAAA,eAAS1C,MAAMb,MAAf;AAAA,KAAd,CAAT;AACAqD;AACH;;AAED,SAASpD,IAAT,GAAgB;AACZ,gBAAIuD,SAAJ,CAAc,CAAd,EAAiB,CAAjB;AACAL;AACAC,IFtHiB1B;AACjB,AEsHAS,SAAKlC,IAAL,SFtHc;AAAA,AEuHdkC,SAAKC,OAAL,CAAakB,OAAb,CAAqB;AAAA,eAAU5D,OAAOO,IAAP,EAAV;AFtHjB,AEsHiB,KAArB,QFtHS0B,KAAL,GAAa,CAAb;AACH,AEsHDgB,WAAOW,OAAP,CAAe;AAAA,eAASzC,MAAMZ,IAAN,EAAT;AAAA,KAAf;AACH;0BFtHa0B,OAAO;AACb,AEuHR,SAAS8B,QFvHI9B,KAAL,CEuHR,CAAwB+B,CFvHH/B,AEuHrB,EAA2B,GFvHnB;AACH,AEuHD,QAAG+B,EAAEC,OAAF,KAAc,EAAjB,EAAqBZ,QAAQC,IAAR,GAAeU,EAAEE,IAAF,KAAW,SAAX,GAAuB,IAAvB,GAA8B,KAA7C;AACrB,QAAGF,EAAEC,OAAF,KAAc,EAAjB,EAAqBZ,QAAQE,KAAR,GAAgBS,EAAEE,IAAF,KAAW,SAAX,GAAuB,IAAvB,GAA8B,KAA9C;AACrB,QAAGF,EAAEC,OAAF,KAAc,EAAjB,EAAqBZ,QAAQG,KAAR,GAAgBQ,EAAEE,IAAF,KAAW,SAAX,GAAuB,IAAvB,GAA8B,KAA9C;AACxB;;AAED,SAASC,iBAAT,GAA6B;AACzBC,WAAOC,OFnIUrC,SEmIjB,CAAwB,SAAxB,EAAmC+B,cAAnC;AACAK,WAAOC,gBAAP,CAAwB,OAAxB,EAAiCN,cAAjC;AACH;;AAGD;;AAEA,SAASO,IAAT,GAAgB;AACZrD;AACAV;AACAgE,0BAAsBD,IAAtB;AACH;;AAEDC,sBAAsBD,IAAtB;AACAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ALjJA,IAAM7E,eAAe,GAArB;AAAA,IAA0BC,gBAAgB,GAA1C;;AAEA,IAAIC,SAASC,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACAF,OAAOG,KAAP,GAAeL,YAAf;AACAE,OAAOI,MAAP,GAAgBL,aAAhB;AACA,IAAMM,MAAML,OAAOM,UAAP,CAAkB,IAAlB,CAAZ;;QAEQR,eAAAA;QAAcC,gBAAAA;QAAeM,MAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBELbqB;;AAFxB;;AAEe,SAASA,KAAT,GAA2B;AAAA,QAAZC,KAAY,uEAAJ,EAAI;;AACtCA,UAAMlB,CAAN,GAAU,GAAV;AACAkB,UAAMjB,CAAN,GAAU,EAAV;AACAiB,UAAMC,MAAN,GAAeP,KAAKQ,KAAL,CAAWR,KAAKS,MAAL,KAAgB,QAA3B,IAAuC,OAAtD;AACAH,UAAMb,MAAN,GAAe,IAAf;;AAEAa,UAAMZ,IAAN,GAAa,YAAW;AACpB,oBAAIC,SAAJ,GAAgBW,MAAMhB,KAAtB;AACA,oBAAIoB,QAAJ,CAAaJ,MAAMR,CAAnB,EAAsBQ,MAAMP,CAA5B,EAA+BO,MAAMlB,CAArC,EAAwCkB,MAAMjB,CAA9C;AACA,oBAAIsB,IAAJ,GAAW,YAAX;AACA,YAAIC,OAAO;AACPC,mBAAU,CAAC,CAACP,MAAMC,MAAN,GAAe,OAAhB,EAAyBO,OAAzB,CAAiC,CAAjC,CAAX,MADO;AAEPxB,mBAAO,OAFA;AAGPyB,0BAAc,YAAIC,WAAJ,CAAgB,KAAKH,KAArB,CAHP;AAIPf,eAAIQ,MAAMR,CAAN,GAAUQ,MAAMlB,CAAN,GAAU,CAJjB;AAKPW,eAAIO,MAAMP,CAAN,GAAUO,MAAMjB,CAAN,GAAU;AALjB,SAAX;AAOA,oBAAIM,SAAJ,GAAgBiB,KAAKtB,KAArB;AACA,oBAAI2B,QAAJ,CAAaL,KAAKC,KAAlB,EAAyBD,KAAKd,CAA9B,EAAiCc,KAAKb,CAAtC;AACH,KAbD;;AAeAO,UAAMY,KAAN,GAAc,YAAW;AACrB,eAAOZ,MAAMC,MAAN,GAAe,OAAtB;AACH,KAFD;;AAIAD,UAAMF,MAAN,GAAe,YAAW;AACtBE,cAAMb,MAAN,GAAea,MAAMb,MAAN,IAAgBa,MAAMY,KAAN,EAA/B;AACH,KAFD;;AAKA,WAAOZ,KAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QEjCee,OAAAA;QAIAC,WAAAA;AAJT,SAASD,IAAT,CAAcE,GAAd,EAAmBC,GAAnB,EAAwB;AAC3B,WAAOxB,KAAKQ,KAAL,CAAWR,KAAKS,MAAL,KAAgBe,GAA3B,IAAkCD,GAAzC;AACH;;AAEM,SAASD,QAAT,CAAkBG,CAAlB,EAAqBC,CAArB,EAAwB;AAC3B,WAAOD,EAAE3B,CAAF,GAAM4B,EAAE5B,CAAF,GAAM4B,EAAEtC,CAAd,IACCqC,EAAE3B,CAAF,GAAM2B,EAAErC,CAAR,GAAYsC,EAAE5B,CADf,IAEC2B,EAAE1B,CAAF,GAAM2B,EAAE3B,CAAF,GAAM2B,EAAErC,CAFf,IAGCoC,EAAE1B,CAAF,GAAM0B,EAAEpC,CAAR,GAAYqC,EAAErC,CAHtB;AAIH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBHPuBH;;AAFxB;;AAEe,SAASA,MAAT,CAAgBC,MAAhB,EAAwB;;AAEnCA,WAAOC,CAAP,GAAW,EAAX;AACAD,WAAOE,CAAP,GAAW,EAAX;AACAF,WAAOG,KAAP,GAAe,OAAf;AACAH,WAAOI,SAAP,GAAmB,CAACJ,OAAOK,KAA3B;AACAL,WAAOM,MAAP,GAAgB,IAAhB;;AAEAN,WAAOO,IAAP,GAAc,YAAW;AACrB,oBAAIC,SAAJ,GAAgBR,OAAOG,KAAvB;AACA,oBAAIM,SAAJ;AACA,oBAAIC,GAAJ,CAAQV,OAAOW,CAAf,EAAkBX,OAAOY,CAAzB,EAA4BZ,OAAOC,CAAP,GAAW,CAAvC,EAA0C,CAA1C,EAA6CY,KAAKC,EAAL,GAAU,CAAvD;AACA,oBAAIC,IAAJ;AACH,KALD;;AAOAf,WAAOgB,QAAP,GAAkB,YAAW;AACzB,eAAOhB,OAAOY,CAAP,IAAY,CAAnB;AACH,KAFD;;AAIAZ,WAAOiB,MAAP,GAAgB,YAAW;AACvBjB,eAAOY,CAAP,IAAYZ,OAAOI,SAAnB;AACAJ,eAAOM,MAAP,GAAgBN,OAAOM,MAAP,IAAiBN,OAAOgB,QAAP,EAAjC;AACH,KAHD;;AAKA,WAAOhB,MAAP;AACH","file":"29838abd20c8d1086c78a897ebbc7895.map","sourcesContent":["const CANVAS_WIDTH = 640, CANVAS_HEIGHT = 640;\n\nlet canvas = document.getElementById('canvas');\ncanvas.width = CANVAS_WIDTH;\ncanvas.height = CANVAS_HEIGHT;\nconst ctx = canvas.getContext('2d');\n\nexport {CANVAS_WIDTH, CANVAS_HEIGHT, ctx};","import {ctx} from './Canvas';\n\nexport default function Bullet(bullet) {\n    \n    bullet.w = 10;\n    bullet.h = 10;\n    bullet.color = \"white\";\n    bullet.yVelocity = -bullet.speed;\n    bullet.active = true;\n    \n    bullet.draw = function() {\n        ctx.fillStyle = bullet.color;\n        ctx.beginPath();\n        ctx.arc(bullet.x, bullet.y, bullet.w / 2, 0, Math.PI * 2);\n        ctx.fill();\n    };\n    \n    bullet.inBounds = function() {\n        return bullet.y >= 0;\n    };\n\n    bullet.update = function() {\n        bullet.y += bullet.yVelocity;\n        bullet.active = bullet.active && bullet.inBounds();              \n    };\n\n    return bullet;\n}","import {ctx} from './Canvas';\n\nexport default function Block(block = {}) {\n    block.w = 100;\n    block.h = 50;    \n    block.points = Math.floor(Math.random() * 15000000) + 5000000;\n    block.active = true;\n\n    block.draw = function() {\n        ctx.fillStyle = block.color;\n        ctx.fillRect(block.x, block.y, block.w, block.h);\n        ctx.font = \"20px Arial\";\n        let text = {\n            value: `${+(block.points / 1000000).toFixed(1)}M`,\n            color: \"black\",\n            textMeasures: ctx.measureText(this.value),\n            x: (block.x + block.w / 3),\n            y: (block.y + block.h / 2)\n        };            \n        ctx.fillStyle = text.color;\n        ctx.fillText(text.value, text.x, text.y);\n    };\n\n    block.alive = function() {\n        return block.points > 1000000;\n    };\n\n    block.update = function() {        \n        block.active = block.active && block.alive();\n    }\n\n\n    return block;\n}","export default class Player {\n    constructor() {\n        this.score = 0;\n    }\n    set Score(score) {\n        this.score = score;\n    }\n}","export function rand(min, max) {\n    return Math.floor(Math.random() * max) + min;\n}\n\nexport function collides(a, b) {\n    return a.x < b.x + b.w &&\n            a.x + a.w > b.x &&\n            a.y < b.y + b.h &&\n            a.y + a.h > b.h;\n}","import {CANVAS_WIDTH, CANVAS_HEIGHT, ctx} from './Canvas';\nimport Bullet from './Bullet';\nimport Block from './Block';\nimport Player from './Player';\nimport {rand, collides} from './utils';\n\nconst player = new Player();\n\nlet hero = {\n    color: \"red\",\n    w: 100,\n    h: 100,\n    x: CANVAS_WIDTH / 2,\n    y: CANVAS_HEIGHT - 110,\n    speed: 10,\n    bullets: [],\n    shooting: false,\n    draw: function() {\n        ctx.fillStyle = this.color;\n        ctx.fillRect(this.x, this.y, this.w, this.h);\n    },\n    shoot: function() {\n        if(this.shooting) return;\n        this.shooting = setInterval(() => {\n            this.bullets.push(new Bullet({\n                speed: 5,\n                x: this.x + this.w/2,\n                y: this.y\n            }));\n        }, 700);\n    },\n    moveLeft: function() {\n        if(this.x > 0) {\n            this.x -= this.speed;\n        }\n    },\n    moveRight: function() {\n        if(this.x < CANVAS_WIDTH - this.w) {\n            this.x += this.speed;\n        }\n    },\n    inBounds: function() {\n        return this.x > 0 && this.x < CANVAS_WIDTH - this.w;\n    }\n};\n\nlet blocks = [];\n\nlet n = 6;\nlet blockWidth = CANVAS_WIDTH / n;\n\nfor (let i = 0; i < n; i++) {\n    blocks.push(new Block({\n        color: `rgb(${rand(0,255)}, ${rand(0,255)}, ${rand(0,255)})`,\n        w: blockWidth,\n        x: blockWidth * i + 1,\n        y: 50\n    }));\n}\n\n\nvar keydown = {\n    left: false,\n    right: false,\n    space: false\n}\n\n\n\nfunction drawBackground() {\n    ctx.fillStyle = \"black\";\n    ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n}\n\nfunction drawScore() {\n    ctx.fillStyle = \"white\";\n    ctx.font = \"Arial 20px\";\n    ctx.fillText(`Score: ${+(player.score / 1000000).toFixed(1)}M`, 20, 50);\n}\n\n\n\nfunction handleCollisions() {\n    hero.bullets.forEach( bullet => {\n        blocks.forEach(block => {\n            if(collides(bullet, block)) {\n                bullet.active = false;\n                block.points -= 10000;\n                player.score += 10000;\n            }\n        });\n    });\n}\n\n\nfunction update() {\n    if(keydown.left) {\n        hero.moveLeft();\n    }\n\n    if(keydown.right) {\n        hero.moveRight();\n    }\n\n    if(keydown.space) {\n        hero.shoot();\n    }    \n    \n    hero.bullets.forEach(bullet => bullet.update());\n    hero.bullets = hero.bullets.filter( bullet => bullet.active);\n    blocks.forEach(block => block.update());\n    blocks = blocks.filter(block => block.active);\n    handleCollisions();\n}\n\nfunction draw() {\n    ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    drawBackground();\n    drawScore();\n    hero.draw();\n    hero.bullets.forEach(bullet => bullet.draw());\n    blocks.forEach(block => block.draw());\n}\n\nfunction handleControls(e) {\n    if(e.keyCode === 37) keydown.left = e.type === \"keydown\" ? true : false;    \n    if(e.keyCode === 39) keydown.right = e.type === \"keydown\" ? true : false;\n    if(e.keyCode === 32) keydown.space = e.type === \"keydown\" ? true : false;\n}\n\nfunction addEventListeners() {\n    window.addEventListener('keydown', handleControls);\n    window.addEventListener('keyup', handleControls);\n}\n\n\n// game loop\n\nfunction loop() {\n    update();\n    draw();\n    requestAnimationFrame(loop);\n}\n\nrequestAnimationFrame(loop);\naddEventListeners();"]}